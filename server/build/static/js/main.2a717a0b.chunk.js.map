{"version":3,"sources":["reportWebVitals.js","api/index.js","api/chatWebSocket.js","types/index.js","actions/chat.js","components/Logout/index.jsx","actions/login.js","components/Layout/index.jsx","pages/Login/index.js","components/UserList/index.js","components/Chat/index.js","pages/Main/index.js","reducers/index.js","store/index.js","routes/PrivateRoute/index.js","routes/PublicRoute/index.js","pages/Registration/index.js","actions/registration.js","index.js"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","API_URL","headers","socketRef","endpoint","instance","this","socketIOClient","login","username","password","a","axios","post","response","data","console","error","registration","firstName","lastName","logout","newHeader","Authorization","localStorage","getItem","messageListener","messages","Promise","resolve","on","message","LOGIN_ACTION","LOGOUT_ACTION","LOGIN_FAILED","REGISTER_ACTION","MESSAGE_LISTENER","USER_EMIT","SEND_MESSAGE","USER_LISTENER","UserAction","users","dispatch","indexOf","emit","userEmit","type","MessageAction","msg","userId","userName","sendMessage","Logout","useDispatch","className","to","onClick","e","preventDefault","Layout","children","isLogged","Login","useState","setUsername","setPassword","state","useSelector","isFail","log","onSubmit","payload","LoginAction","htmlFor","onChange","event","target","value","name","id","placeholder","UserList","map","user","i","Chat","textareaRef","handleSubmit","messagesRef","useRef","socketUserId","useEffect","current","scrollTop","scrollHeight","ref","m","localeData","Date","timestamp","toLocaleTimeString","cn","Main","msgs","onlineUsers","focus","initalState","token","fullName","expirationToken","isRegister","store","createStore","action","setItem","removeItem","composeWithDevTools","applyMiddleware","thunk","render","PrivateRoute","rest","bind","PublicRoute","Registration","formRef","elements","repassword","RegistrationAction","required","ReactDOM","StrictMode","path","document","getElementById"],"mappings":"sMAYeA,G,MAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,Q,6GCJRQ,EAAU,wBAEVC,EAAU,CACZ,eAAgB,oBAEdC,EAAY,ICHd,WAAYC,GAKR,OALmB,yBAFvBC,SAAW,KAGFC,KAAKD,WACNC,KAAKD,SAAWE,IAAeH,IAG5BE,KAAKD,SDFF,CAAkBJ,GAEvBO,EAAK,uCAAG,WAAOC,EAAUC,GAAjB,eAAAC,EAAA,+EAEUC,IAAMC,KAAN,UAAcZ,EAAd,UAA+B,CAACQ,WAAUC,YAAW,CAACR,YAFhE,cAEPY,EAFO,yBAGNA,EAASC,MAHH,gCAKbC,QAAQC,MAAM,cAAd,MALa,yDAAH,wDASLC,EAAY,uCAAG,WAAOC,EAAWC,EAAUX,EAAUC,GAAtC,eAAAC,EAAA,+EAEGC,IAAMC,KAAN,UAAcZ,EAAd,iBAAsC,CACzDkB,YACAC,WACAX,WACAC,YACD,CAACR,YAPgB,cAEdY,EAFc,yBAQbA,EAASC,MARI,gCAUpBC,QAAQC,MAAM,qBAAd,MAVoB,yDAAH,4DAcZI,EAAM,uCAAG,4BAAAV,EAAA,sEAERW,EAFQ,2BAEQpB,GAFR,IAEiBqB,cAAeC,aAAaC,QAAQ,WAFrD,SAGRb,IAAMC,KAAN,UAAcZ,EAAd,WAAgC,KAAM,CAACC,QAASoB,IAHxC,sDAKdN,QAAQC,MAAM,eAAd,MALc,wDAAH,qDA0BNS,EAAkB,SAACC,GAC5B,OAAO,IAAIC,SAAQ,SAAAC,GACf1B,EAAU2B,GAAG,eAAe,SAACC,GACzBF,EAAQ,GAAD,mBAAMF,GAAN,CAAgBI,YE9DtBC,EAAe,eACfC,EAAgB,gBAChBC,EAAe,eACfC,EAAkB,kBAElBC,EAAmB,mBACnBC,EAAY,YACZC,EAAe,eACfC,EAAgB,gBCEhBC,EAAa,SAACC,GACvB,OAAO,SAACC,IHgCY,SAACD,IACoC,IAArDA,EAAME,QAAQnB,aAAaC,QAAQ,cACnCtB,EAAUyC,KAAK,WAAYpB,aAAaC,QAAQ,aGjChDoB,CAASJ,GACTC,EAAS,CAACI,KAAMT,MAIXU,EAAgB,SAAChB,GAC1B,OAAO,SAACW,IHiDe,SAACX,GACxB,IAAMiB,EAAM,CACRjB,UACAkB,OAAQzB,aAAaC,QAAQ,UAC7ByB,SAAU1B,aAAaC,QAAQ,aAEnCtB,EAAUyC,KAAK,cAAeI,GGtD1BG,CAAYpB,GACZW,EAAS,CAACI,KAAMR,M,OCfXc,EAAS,WACpB,IAAMV,EAAWW,cAOjB,OACE,oBAAIC,UAAU,WAAd,SACE,cAAC,IAAD,CAAMA,UAAU,WAAWC,GAAG,SAASC,QAPf,SAACC,GAC3BA,EAAEC,iBACFhB,ECKA,uCAAO,WAAOA,GAAP,SAAA/B,EAAA,sEACGU,IADH,OAEHqB,EAAS,CAACI,KAAMb,IAFb,2CAAP,wDDAE,wBETO0B,EAAS,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SACjBC,EAAWrC,aAAaC,QAAQ,UAEtC,OACE,qCACE,iCACE,sBAAK6B,UAAU,2CAAf,UACE,qBAAKA,UAAU,qBAAf,SACGO,GACC,oBAAIP,UAAU,WAAd,SACE,cAAC,IAAD,CAAMA,UAAU,WAAWC,GAAG,IAA9B,sBAMN,qBAAKD,UAAU,qBAAf,SACIO,EAcA,cAAC,EAAD,IAbA,qCACE,oBAAIP,UAAU,WAAd,SACE,cAAC,IAAD,CAAMA,UAAU,WAAWC,GAAG,SAA9B,qBAIF,oBAAID,UAAU,WAAd,SACE,cAAC,IAAD,CAAMA,UAAU,WAAWC,GAAG,gBAA9B,iCAWXK,MCpCME,EAAQ,WAAO,IAAD,EACOC,mBAAS,MADhB,mBAClBb,EADkB,KACRc,EADQ,OAEOD,mBAAS,MAFhB,mBAElBrD,EAFkB,KAERuD,EAFQ,KAGnBC,EAAQC,aAAY,SAACD,GAAD,OAAWA,KAE/BxB,EAAWW,cAEba,EAAME,QACRpD,QAAQqD,IAAI,cAgBd,OACE,cAAC,EAAD,UACE,qBAAKf,UAAU,YAAf,SACE,qBAAKA,UAAU,iBAAf,SACE,sBAAKA,UAAU,uCAAf,UACE,uCACA,uBAAMgB,SAnBM,SAACb,GACrBA,EAAEC,iBACFhB,EFhBuB,SAACjC,EAAUC,GAClC,8CAAO,WAAOgC,GAAP,eAAA/B,EAAA,+EAEoBH,EAAMC,EAAUC,GAFpC,OAEOK,EAFP,OAGC2B,EAAS,CAACI,KAAMd,EAAcuC,QAASxD,IAHxC,gDAKC2B,EAAS,CAACI,KAAMZ,IALjB,yDAAP,sDEeSsC,CAAYtB,EAAUxC,KAiBvB,UACE,sBAAK4C,UAAU,aAAf,UACE,uBAAOmB,QAAQ,WAAf,sBACA,uBACEC,SAlBO,SAACC,GACtBX,EAAYW,EAAMC,OAAOC,QAkBX/B,KAAK,OACLgC,KAAK,WACLC,GAAG,WACHC,YAAY,WACZ1B,UAAU,oBAGd,sBAAKA,UAAU,aAAf,UACE,uBAAOmB,QAAQ,WAAf,sBACA,uBACEC,SAzBO,SAACC,GACtBV,EAAYU,EAAMC,OAAOC,QAyBX/B,KAAK,WACLgC,KAAK,WACLC,GAAG,WACHC,YAAY,WACZ1B,UAAU,oBAGd,wBAAQA,UAAU,4BAA4BR,KAAK,SAAnD,sBAIF,sBAAKQ,UAAU,OAAf,0BACe,cAAC,IAAD,CAAMC,GAAG,gBAAT,kCC7Dd0B,G,OAAW,SAAC,GAAe,IAAbxC,EAAY,EAAZA,MACzB,OACE,sBAAKa,UAAU,QAAf,UACE,oBAAIA,UAAU,eAAd,0BACA,oBAAIA,UAAU,cAAd,SACGb,EAAMyC,KAAI,SAACC,EAAMC,GAAP,OACT,oBAAI9B,UAAU,OAAd,SACE,6BAAK6B,KADP,eAAkCC,c,iBCL/BC,G,OAAO,SAAC,GAA2C,IAA1C1D,EAAyC,EAAzCA,SAAU2D,EAA+B,EAA/BA,YAAaC,EAAkB,EAAlBA,aACnCC,EAAcC,iBAAO,MACrBC,EAAelE,aAAaC,QAAQ,UAM1C,OAJAkE,qBAAU,WACNH,EAAYI,QAAQC,UAAYL,EAAYI,QAAQE,eACrD,CAACnE,IAGA,sBAAK2B,UAAU,OAAf,UACI,qBAAKA,UAAU,iBAAiByC,IAAKP,EAArC,SACK7D,GACDA,EAASuD,KAAI,SAACc,EAAGZ,GACb,IACMa,EADO,IAAIC,KAAKF,EAAEG,WACAC,qBAExB,OACI,sBAEI9C,UAAW+C,IACP,UACAX,IAAiBM,EAAE/C,QAAU,kBAJrC,UAOI,sBAAKK,UAAU,gBAAf,UACI,+BAAO0C,EAAE9C,WACT,+BAAO+C,OAEX,qBAAK3C,UAAU,gBAAf,SAAgC0C,EAAEjE,YAV7B,OAASqD,QAgB9B,uBAAMd,SAAUiB,EAAcjC,UAAU,aAAxC,UACI,0BAAUA,UAAU,eAAeyC,IAAKT,IACxC,wBAAQhC,UAAU,kBAAkBR,KAAK,SAAzC,0BCjCHwD,EAAO,WAChB,IAAMhB,EAAcG,iBAAO,MACrBvB,EAAQC,aAAY,SAACD,GAAD,OAAWA,KAC/BxB,EAAWW,cAEjBsC,qBAAU,WPaiB,IAACY,EOZxB7D,EPTJ,uCAAO,WAAOA,GAAP,mBAAA/B,EAAA,sEH8CA,IAAIiB,SAAQ,SAAAC,GAEf1B,EAAU2B,GAAG,YAAY,YAA8B,IAA5B0E,EAA2B,EAA3BA,YAAa7E,EAAc,EAAdA,SACpCX,QAAQqD,IAAI1C,GACZE,EAAQ,CAACY,MAAM,YAAK+D,GAAc7E,SAAS,YAAKA,WGlDjD,gBACIc,EADJ,EACIA,MAAOd,EADX,EACWA,SACde,EAAS,CAACI,KAAMP,EAAegC,QAAS,CAAC9B,QAAOd,cAF7C,2CAAP,uDOUIe,EAASF,EAAW0B,EAAMzB,QAC1BC,GPUwB6D,EOVCrC,EAAMvC,SPWnC,uCAAO,WAAOe,GAAP,eAAA/B,EAAA,sEACoBe,EAAgB6E,GADpC,OACG5E,EADH,OAEHe,EAAS,CAACI,KAAMV,EAAkBmC,QAAS,CAAC5C,cAFzC,2CAAP,0DOVG,CAACuC,EAAMzB,MAAOyB,EAAMvC,WASvB,OACI,cAAC,EAAD,UACI,qBAAK2B,UAAU,YAAf,SACI,qBAAKA,UAAU,MAAf,SACI,sBAAKA,UAAU,MAAf,UACI,qBAAKA,UAAU,QAAf,SACI,cAAC,EAAD,CAAUb,MAAOyB,EAAMzB,UAE3B,qBAAKa,UAAU,QAAf,SACI,cAAC,EAAD,CACI3B,SAAUuC,EAAMvC,SAChB4D,aAlBP,SAACZ,GAClBA,EAAMjB,iBACNhB,EAASK,EAAcuC,EAAYM,QAAQf,MAAOX,EAAMvC,WACxD2D,EAAYM,QAAQf,MAAQ,GAC5BS,EAAYM,QAAQa,SAeInB,YAAaA,gB,wBC1BvCoB,EAAc,CAChBC,MAAOnF,aAAaC,QAAQ,UAAY,KACxChB,SAAUe,aAAaC,QAAQ,aAAe,KAC9CE,SAAU,GACVc,MAAO,GACPmE,SAAUpF,aAAaC,QAAQ,aAAe,KAC9CwB,OAAQzB,aAAaC,QAAQ,WAAa,KAC1CoF,gBAAiBrF,aAAaC,QAAQ,oBAAsB,KAC5D2C,QAAQ,EACR0C,WAAYtF,aAAaC,QAAQ,aAAe,MChBvCsF,EAAQC,uBDmBM,WAAkC,IAAjC9C,EAAgC,uDAAxBwC,EAAaO,EAAW,uCACxD,OAAQA,EAAOnE,MACX,KAAKd,EAOD,OANAhB,QAAQqD,IAAI,2BACZ7C,aAAa0F,QAAQ,QAAS,UAAYD,EAAO1C,QAAQoC,OACzDnF,aAAa0F,QAAQ,WAAYD,EAAO1C,QAAQ9D,UAChDe,aAAa0F,QAAQ,WAAYD,EAAO1C,QAAQqC,UAChDpF,aAAa0F,QAAQ,kBAAmBD,EAAO1C,QAAQsC,iBACvDrF,aAAa0F,QAAQ,SAAUD,EAAO1C,QAAQtB,QACvC,2BACAiB,GADP,IAEIyC,MAAO,UAAYM,EAAO1C,QAAQoC,MAClClG,SAAUwG,EAAO1C,QAAQ9D,SACzBmG,SAAUK,EAAO1C,QAAQqC,SACzBC,gBAAiBI,EAAO1C,QAAQsC,gBAChC5D,OAAQgE,EAAO1C,QAAQtB,OACvBmB,QAAQ,IAEhB,KAAKnC,EAMD,OALAT,aAAa2F,WAAW,SACxB3F,aAAa2F,WAAW,YACxB3F,aAAa2F,WAAW,YACxB3F,aAAa2F,WAAW,UACxB3F,aAAa2F,WAAW,mBACjB,eACAT,GAEX,KAAKxE,EAED,OADAlB,QAAQqD,IAAI,cACL,2BAAIH,GAAX,IAAkBE,QAAQ,IAE9B,KAAKjC,EACD,OAAO,2BAAI+B,GAAX,IAAkB4C,YAAY,IAElC,KAAKvE,EACD,OAAO,2BAAI2B,GAAX,IAAkBvC,SAAUsF,EAAO1C,QAAQ5C,SAAUc,MAAOwE,EAAO1C,QAAQ9B,QAC/E,KAAKJ,EAEL,KAAKC,EACD,OAAO,eAAI4B,GACf,KAAK9B,EACD,OAAO,2BAAI8B,GAAX,IAAkBvC,SAAUsF,EAAO1C,QAAQ5C,WAC/C,QACI,OAAO,eAAIuC,MC5DnBkD,8BAAoBC,0BAAgBC,O,QCHlCC,GAAS,SAAC3D,EAAU+C,GACtB,OAAOA,EAAQ/C,EAAW,cAAC,IAAD,CAAUL,GAAG,YAE9BiE,GAAe,SAAC,GAAyB,IAAxB5D,EAAuB,EAAvBA,SAAa6D,EAAU,4BAC1Cd,EAASxC,aACZ,SAACD,GAAD,OAAWA,KADRyC,MAGP,OACI,cAAC,IAAD,2BAAWc,GAAX,IAAiBF,OAAQA,GAAOG,KAAK,KAAM9D,EAAU+C,OCRvDY,GAAS,SAAC3D,EAAU+C,GACtB,OAAOA,EAAQ,cAAC,IAAD,CAAUpD,GAAG,MAAQK,GAE3B+D,GAAc,SAAC,GAAyB,IAAxB/D,EAAuB,EAAvBA,SAAa6D,EAAU,4BACzCd,EAASxC,aACZ,SAACD,GAAD,OAAWA,KADRyC,MAGP,OACI,cAAC,IAAD,2BAAWc,GAAX,IAAiBF,OAAQA,GAAOG,KAAK,KAAM9D,EAAU+C,OCLhDiB,GAAe,WAC1B,IAAMC,EAAUpC,iBAAO,MACjBvB,EAAQC,aAAY,SAACD,GAAD,OAAWA,KAE/BxB,EAAWW,cAEjB,GAAIa,EAAM4C,WACR,OAAO,cAAC,IAAD,CAAUvD,GAAI,WAGnBW,EAAME,QACRpD,QAAQqD,IAAI,cAyBd,OACE,cAAC,EAAD,UACE,qBAAKf,UAAU,YAAf,SACE,qBAAKA,UAAU,iBAAf,SACE,sBAAKA,UAAU,uCAAf,UACE,8CACA,uBAAMyC,IAAK8B,EAASvD,SA5BR,SAACb,GACrBA,EAAEC,iBADyB,MAQvBD,EAAEmB,OAAOkD,SALX3G,EAHyB,EAGzBA,UACAC,EAJyB,EAIzBA,SACAX,EALyB,EAKzBA,SACAC,EANyB,EAMzBA,SACAqH,EAPyB,EAOzBA,WAEErH,EAASmE,QAAUkD,EAAWlD,MAChCnC,EC3B4B,SAACvB,EAAWC,EAAUX,EAAUC,GAC9D,8CAAO,WAAOgC,GAAP,eAAA/B,EAAA,+EAEoBO,EAAaC,EAAWC,EAAUX,EAAUC,GAFhE,OAEOK,EAFP,OAGC2B,EAAS,CAACI,KAAMX,EAAiBoC,QAASxD,IAH3C,gDAKC2B,EAAS,CAACI,KdLS,kBcKcyB,QAAS,OAL3C,yDAAP,sDD2BIyD,CACE7G,EAAU0D,MACVzD,EAASyD,MACTpE,EAASoE,MACTnE,EAASmE,QAIb7D,QAAQqD,IAAI,6BASN,UACE,sBAAKf,UAAU,aAAf,UACE,uBAAOmB,QAAQ,WAAf,wBACA,uBACEwD,UAAQ,EACRnF,KAAK,OACLgC,KAAK,YACLC,GAAG,YACHC,YAAY,YACZ1B,UAAU,oBAGd,sBAAKA,UAAU,aAAf,UACE,uBAAOmB,QAAQ,WAAf,uBACA,uBACEwD,UAAQ,EACRnF,KAAK,OACLgC,KAAK,WACLC,GAAG,WACHC,YAAY,WACZ1B,UAAU,oBAGd,sBAAKA,UAAU,aAAf,UACE,uBAAOmB,QAAQ,WAAf,sBACA,uBACEwD,UAAQ,EACRnF,KAAK,OACLgC,KAAK,WACLC,GAAG,WACHC,YAAY,WACZ1B,UAAU,oBAGd,sBAAKA,UAAU,aAAf,UACE,uBAAOmB,QAAQ,WAAf,sBACA,uBACEwD,UAAQ,EACRnF,KAAK,WACLgC,KAAK,WACLC,GAAG,WACHC,YAAY,WACZ1B,UAAU,oBAGd,sBAAKA,UAAU,aAAf,UACE,uBAAOmB,QAAQ,WAAf,yBACA,uBACEwD,UAAQ,EACRnF,KAAK,WACLgC,KAAK,aACLC,GAAG,aACHC,YAAY,aACZ1B,UAAU,oBAGd,wBAAQA,UAAU,4BAA4BR,KAAK,SAAnD,mC,OE1FdoF,IAASX,OACL,cAAC,IAAMY,WAAP,UACI,cAAC,IAAD,CAAUpB,MAAOA,EAAjB,SACI,cAAC,IAAD,UACI,eAAC,IAAD,WACI,cAAC,GAAD,CAAaqB,KAAM,SAAnB,SACI,cAAC,EAAD,MAEJ,cAAC,GAAD,CAAaA,KAAM,gBAAnB,SACI,cAAC,GAAD,MAEJ,cAAC,GAAD,CAAcA,KAAM,IAApB,SACI,cAAC,EAAD,MAEJ,cAAC,GAAD,CAAcA,KAAM,UAApB,SACI,cAAC,EAAD,eAMpBC,SAASC,eAAe,SAM5B9I,K","file":"static/js/main.2a717a0b.chunk.js","sourcesContent":["const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import axios from \"axios\";\nimport {ChatWebSocket} from \"./chatWebSocket\";\n\nconst API_URL = 'http://localhost:8000';\n\nconst headers = {\n    'Content-Type': 'application/json',\n}\nconst socketRef = new ChatWebSocket(API_URL);\n\nexport const login = async (username, password) => {\n    try {\n        const response = await axios.post(`${API_URL}/login`, {username, password}, {headers});\n        return response.data;\n    } catch (error) {\n        console.error('Login Error', error);\n    }\n}\n\nexport const registration = async (firstName, lastName, username, password) => {\n    try {\n        const response = await axios.post(`${API_URL}/registration`, {\n            firstName,\n            lastName,\n            username,\n            password\n        }, {headers})\n        return response.data;\n    } catch (error) {\n        console.error('Registration Error', error);\n    }\n}\n\nexport const logout = async () => {\n    try {\n        const newHeader = {...headers, Authorization: localStorage.getItem('token')}\n        await axios.post(`${API_URL}/logout`, null, {headers: newHeader});\n    } catch (error) {\n        console.error('Logout error', error)\n    }\n}\n\n\nexport const userEmit = (users) => {\n    if (users.indexOf(localStorage.getItem('fullName')) === -1) {\n        socketRef.emit('joinUser', localStorage.getItem('fullName'));\n    }\n};\n\nexport const userListener = () => {\n    return new Promise(resolve => {\n        // messages and users listeners\n        socketRef.on('joinUser', ({onlineUsers, messages}) => {\n            console.log(messages);\n            resolve({users: [...onlineUsers], messages: [...messages]});\n        });\n    });\n}\n\nexport const messageListener = (messages) => {\n    return new Promise(resolve => {\n        socketRef.on('sendMessage', (message) => {\n            resolve( [...messages, message]);\n        });\n    });\n}\n\nexport const sendMessage = (message) => {\n    const msg = {\n        message,\n        userId: localStorage.getItem('userId'),\n        userName: localStorage.getItem('fullName')\n    }\n    socketRef.emit('sendMessage', msg);\n}\n","import socketIOClient from \"socket.io-client\";\n\nexport class ChatWebSocket {\n    instance = null;\n\n    constructor(endpoint) {\n        if (!this.instance) {\n            this.instance = socketIOClient(endpoint);\n        }\n\n        return this.instance;\n    }\n}\n","export const LOGIN_ACTION = \"LOGIN_ACTION\";\nexport const LOGOUT_ACTION = \"LOGOUT_ACTION\";\nexport const LOGIN_FAILED = \"LOGIN_FAILED\";\nexport const REGISTER_ACTION = \"REGISTER_ACTION\";\nexport const REGISTER_FAILED = \"REGISTER_ACTION\";\nexport const MESSAGE_LISTENER = \"MESSAGE_LISTENER\";\nexport const USER_EMIT = \"USER_EMIT\";\nexport const SEND_MESSAGE = \"SEND_MESSAGE\";\nexport const USER_LISTENER = \"USER_LISTENER\";\n","import {messageListener, sendMessage, userEmit, userListener} from \"../api\";\nimport {MESSAGE_LISTENER, SEND_MESSAGE, USER_EMIT, USER_LISTENER} from \"../types\";\n\nexport const UserListener = () => {\n    return async (dispatch) => {\n        const {users, messages} = await userListener();\n        dispatch({type: USER_LISTENER, payload: {users, messages}})\n    }\n}\n\nexport const UserAction = (users) => {\n    return (dispatch) => {\n        userEmit(users);\n        dispatch({type: USER_EMIT})\n    }\n}\n\nexport const MessageAction = (message) => {\n    return (dispatch) => {\n        sendMessage(message);\n        dispatch({type: SEND_MESSAGE})\n    }\n}\n\n\nexport const MessageListener = (msgs) => {\n    return async (dispatch) => {\n        const messages = await messageListener(msgs);\n        dispatch({type: MESSAGE_LISTENER, payload: {messages}});\n    }\n}\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport {Link, Redirect} from \"react-router-dom\";\nimport { LogoutAction } from \"../../actions/\";\n\nexport const Logout = () => {\n  const dispatch = useDispatch();\n\n  const removeLocaleStorage = (e) => {\n    e.preventDefault();\n    dispatch(LogoutAction());\n  };\n\n  return (\n    <li className=\"nav-item\">\n      <Link className=\"nav-link\" to=\"/login\" onClick={removeLocaleStorage}>\n        Log Out\n      </Link>\n    </li>\n  );\n};\n","import {login, logout} from '../api';\nimport {LOGIN_ACTION, LOGIN_FAILED, LOGOUT_ACTION} from \"../types\";\n\nexport const LoginAction = (username, password) => {\n    return async (dispatch) => {\n        try {\n            const data = await login(username, password);\n            dispatch({type: LOGIN_ACTION, payload: data});\n        } catch (error) {\n            dispatch({type: LOGIN_FAILED});\n        }\n    }\n}\n\nexport const LogoutAction = () => {\n    return async (dispatch) => {\n        await logout()\n        dispatch({type: LOGOUT_ACTION});\n    };\n}\n","import React from \"react\";\n\nimport { Link } from \"react-router-dom\";\n\nimport { Logout } from \"../Logout\";\n\nexport const Layout = ({ children }) => {\n  const isLogged = localStorage.getItem(\"userId\");\n\n  return (\n    <>\n      <header>\n        <nav className=\"navbar navbar-expand navbar-dark bg-dark\">\n          <div className=\"navbar-nav mr-auto\">\n            {isLogged && (\n              <li className=\"nav-item\">\n                <Link className=\"nav-link\" to=\"/\">\n                  Home\n                </Link>\n              </li>\n            )}\n          </div>\n          <div className=\"navbar-nav ml-auto\">\n            {!isLogged ? (\n              <>\n                <li className=\"nav-item\">\n                  <Link className=\"nav-link\" to=\"/login\">\n                    Login\n                  </Link>\n                </li>\n                <li className=\"nav-item\">\n                  <Link className=\"nav-link\" to=\"/registration\">\n                    Sign Up\n                  </Link>\n                </li>\n              </>\n            ) : (\n              <Logout />\n            )}\n          </div>\n        </nav>\n      </header>\n      {children}\n    </>\n  );\n};\n","import React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { LoginAction } from \"../../actions\";\nimport { Layout } from \"../../components/Layout\";\nimport { Link } from \"react-router-dom\";\n\nexport const Login = () => {\n  const [userName, setUsername] = useState(null);\n  const [password, setPassword] = useState(null);\n  const state = useSelector((state) => state);\n\n  const dispatch = useDispatch();\n\n  if (state.isFail) {\n    console.log(\"show Error\");\n  }\n\n  const submitHandler = (e) => {\n    e.preventDefault();\n    dispatch(LoginAction(userName, password));\n  };\n\n  const usernameChange = (event) => {\n    setUsername(event.target.value);\n  };\n\n  const passwordChange = (event) => {\n    setPassword(event.target.value);\n  };\n\n  return (\n    <Layout>\n      <div className=\"container\">\n        <div className=\"col-6 offset-3\">\n          <div className=\"my-3 p-5 bg-light border border-dark\">\n            <h1>Login</h1>\n            <form onSubmit={submitHandler}>\n              <div className=\"form-group\">\n                <label htmlFor=\"username\">Username</label>\n                <input\n                  onChange={usernameChange}\n                  type=\"text\"\n                  name=\"username\"\n                  id=\"username\"\n                  placeholder=\"username\"\n                  className=\"form-control\"\n                />\n              </div>\n              <div className=\"form-group\">\n                <label htmlFor=\"password\">Password</label>\n                <input\n                  onChange={passwordChange}\n                  type=\"password\"\n                  name=\"password\"\n                  id=\"password\"\n                  placeholder=\"password\"\n                  className=\"form-control\"\n                />\n              </div>\n              <button className=\"btn btn-primary btn-block\" type=\"submit\">\n                Login\n              </button>\n            </form>\n            <div className=\"mt-1\">\n              New to Chat? <Link to=\"/registration\">SIGN UP</Link>\n            </div>\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n};\n","import React from \"react\";\nimport \"./index.scss\";\n\nexport const UserList = ({ users }) => {\n  return (\n    <div className=\"users\">\n      <h1 className=\"users__title\">Users online</h1>\n      <ul className=\"users__list\">\n        {users.map((user, i) => (\n          <li className=\"user\" key={`user_${i}`}>\n            <h5>{user}</h5>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n","import React, {useEffect, useRef} from \"react\";\nimport cn from \"classnames\";\nimport \"./index.scss\";\n\nexport const Chat = ({messages, textareaRef, handleSubmit}) => {\n    const messagesRef = useRef(null);\n    const socketUserId = localStorage.getItem(\"userId\");\n\n    useEffect(() => {\n        messagesRef.current.scrollTop = messagesRef.current.scrollHeight;\n    }, [messages]);\n\n    return (\n        <div className=\"chat\">\n            <div className=\"chat__messages\" ref={messagesRef}>\n                {messages &&\n                messages.map((m, i) => {\n                    const data = new Date(m.timestamp);\n                    const localeData = data.toLocaleTimeString();\n\n                    return (\n                        <div\n                            key={\"key_\" + i}\n                            className={cn(\n                                \"message\",\n                                socketUserId === m.userId && \"message--right\"\n                            )}\n                        >\n                            <div className=\"message__info\">\n                                <span>{m.userName}</span>\n                                <span>{localeData}</span>\n                            </div>\n                            <div className=\"message__text\">{m.message}</div>\n                        </div>\n                    );\n                })}\n            </div>\n\n            <form onSubmit={handleSubmit} className=\"chat__form\">\n                <textarea className=\"form-control\" ref={textareaRef}/>\n                <button className=\"btn btn-primary\" type=\"submit\">\n                    Send\n                </button>\n            </form>\n        </div>\n    );\n};\n","import React, {useEffect, useRef} from \"react\";\nimport {Layout} from \"../../components/Layout\";\nimport {UserList} from \"../../components/UserList\";\nimport {Chat} from \"../../components/Chat\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {UserListener, MessageAction, UserAction, MessageListener} from \"../../actions\";\n\nexport const Main = () => {\n    const textareaRef = useRef(null);\n    const state = useSelector((state) => state);\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        dispatch(UserListener());\n        dispatch(UserAction(state.users))\n        dispatch(MessageListener(state.messages));\n    }, [state.users, state.messages])\n\n    const handleSubmit = (event) => {\n        event.preventDefault();\n        dispatch(MessageAction(textareaRef.current.value, state.messages));\n        textareaRef.current.value = \"\";\n        textareaRef.current.focus();\n    };\n\n    return (\n        <Layout>\n            <div className=\"container\">\n                <div className=\"p-5\">\n                    <div className=\"row\">\n                        <div className=\"col-4\">\n                            <UserList users={state.users}/>\n                        </div>\n                        <div className=\"col-8\">\n                            <Chat\n                                messages={state.messages}\n                                handleSubmit={handleSubmit}\n                                textareaRef={textareaRef}\n                            />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </Layout>\n    )\n};\n","import {\n    LOGIN_ACTION,\n    LOGIN_FAILED,\n    LOGOUT_ACTION,\n    MESSAGE_LISTENER,\n    REGISTER_ACTION,\n    SEND_MESSAGE,\n    USER_EMIT,\n    USER_LISTENER\n} from \"../types\";\n\nconst initalState = {\n    token: localStorage.getItem(\"token\") || null,\n    username: localStorage.getItem(\"username\") || null,\n    messages: [],\n    users: [],\n    fullName: localStorage.getItem(\"fullName\") || null,\n    userId: localStorage.getItem(\"userId\") || null,\n    expirationToken: localStorage.getItem(\"expirationToken\") || null,\n    isFail: false,\n    isRegister: localStorage.getItem(\"username\") || null,\n};\n\nexport const RootReducer = (state = initalState, action) => {\n    switch (action.type) {\n        case LOGIN_ACTION:\n            console.log(\"In Login Action reducer\");\n            localStorage.setItem(\"token\", \"Bearer \" + action.payload.token);\n            localStorage.setItem(\"username\", action.payload.username);\n            localStorage.setItem(\"fullName\", action.payload.fullName);\n            localStorage.setItem(\"expirationToken\", action.payload.expirationToken);\n            localStorage.setItem(\"userId\", action.payload.userId);\n            return {\n                ...state,\n                token: \"Bearer \" + action.payload.token,\n                username: action.payload.username,\n                fullName: action.payload.fullName,\n                expirationToken: action.payload.expirationToken,\n                userId: action.payload.userId,\n                isFail: false,\n            };\n        case LOGOUT_ACTION:\n            localStorage.removeItem(\"token\");\n            localStorage.removeItem(\"username\");\n            localStorage.removeItem(\"fullName\");\n            localStorage.removeItem(\"userId\");\n            localStorage.removeItem(\"expirationToken\");\n            return {\n                ...initalState,\n            };\n        case LOGIN_FAILED:\n            console.log(\"LOIGN FAIL\");\n            return {...state, isFail: true};\n\n        case REGISTER_ACTION:\n            return {...state, isRegister: true};\n\n        case USER_LISTENER:\n            return {...state, messages: action.payload.messages, users: action.payload.users};\n        case USER_EMIT:\n            return {...state}\n        case SEND_MESSAGE:\n            return {...state}\n        case MESSAGE_LISTENER:\n            return {...state, messages: action.payload.messages}\n        default:\n            return {...state};\n    }\n};\n","import { createStore, applyMiddleware } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport { RootReducer } from \"../reducers\";\nexport const store = createStore(\n    RootReducer,\n    composeWithDevTools(applyMiddleware(thunk))\n);\n","import {Redirect, Route} from \"react-router-dom\";\nimport {useSelector} from \"react-redux\";\n\nconst render = (children, token) => {\n    return token ? children : <Redirect to='/login'/>\n}\nexport const PrivateRoute = ({children, ...rest}) => {\n    const {token} = useSelector(\n        (state) => state\n    );\n    return (\n        <Route {...rest} render={render.bind(null, children, token)}/>\n    );\n}\n","import {Redirect, Route} from \"react-router-dom\";\nimport {useSelector} from \"react-redux\";\n\nconst render = (children, token) => {\n    return token ? <Redirect to='/'/> : children\n}\nexport const PublicRoute = ({children, ...rest}) => {\n    const {token} = useSelector(\n        (state) => state\n    );\n    return (\n        <Route {...rest} render={render.bind(null, children, token)}/>\n    );\n}\n","import React, { useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { RegistrationAction } from \"../../actions\";\nimport { Redirect } from \"react-router-dom\";\nimport { Layout } from \"../../components/Layout\";\n\nexport const Registration = () => {\n  const formRef = useRef(null);\n  const state = useSelector((state) => state);\n\n  const dispatch = useDispatch();\n\n  if (state.isRegister) {\n    return <Redirect to={\"/login\"} />;\n  }\n\n  if (state.isFail) {\n    console.log(\"show Error\");\n  }\n\n  const submitHandler = (e) => {\n    e.preventDefault();\n    const {\n      firstName,\n      lastName,\n      username,\n      password,\n      repassword,\n    } = e.target.elements;\n    if (password.value === repassword.value) {\n      dispatch(\n        RegistrationAction(\n          firstName.value,\n          lastName.value,\n          username.value,\n          password.value\n        )\n      );\n    } else {\n      console.log(\"Passwords does not match\");\n    }\n  };\n  return (\n    <Layout>\n      <div className=\"container\">\n        <div className=\"col-6 offset-3\">\n          <div className=\"my-3 p-5 bg-light border border-dark\">\n            <h1>Registration</h1>\n            <form ref={formRef} onSubmit={submitHandler}>\n              <div className=\"form-group\">\n                <label htmlFor=\"password\">First name</label>\n                <input\n                  required\n                  type=\"text\"\n                  name=\"firstName\"\n                  id=\"firstName\"\n                  placeholder=\"firstName\"\n                  className=\"form-control\"\n                />\n              </div>\n              <div className=\"form-group\">\n                <label htmlFor=\"password\">Last name</label>\n                <input\n                  required\n                  type=\"text\"\n                  name=\"lastName\"\n                  id=\"lastName\"\n                  placeholder=\"lastName\"\n                  className=\"form-control\"\n                />\n              </div>\n              <div className=\"form-group\">\n                <label htmlFor=\"password\">Username</label>\n                <input\n                  required\n                  type=\"text\"\n                  name=\"username\"\n                  id=\"username\"\n                  placeholder=\"username\"\n                  className=\"form-control\"\n                />\n              </div>\n              <div className=\"form-group\">\n                <label htmlFor=\"password\">Password</label>\n                <input\n                  required\n                  type=\"password\"\n                  name=\"password\"\n                  id=\"password\"\n                  placeholder=\"password\"\n                  className=\"form-control\"\n                />\n              </div>\n              <div className=\"form-group\">\n                <label htmlFor=\"password\">Re-password</label>\n                <input\n                  required\n                  type=\"password\"\n                  name=\"repassword\"\n                  id=\"repassword\"\n                  placeholder=\"repassword\"\n                  className=\"form-control\"\n                />\n              </div>\n              <button className=\"btn btn-primary btn-block\" type=\"submit\">\n                Register\n              </button>\n            </form>\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n};\n","import {registration} from '../api';\nimport {REGISTER_ACTION, REGISTER_FAILED} from \"../types\";\n\nexport const RegistrationAction = (firstName, lastName, username, password) => {\n    return async (dispatch) => {\n        try {\n            const data = await registration(firstName, lastName, username, password);\n            dispatch({type: REGISTER_ACTION, payload: data});\n        } catch (error) {\n            dispatch({type: REGISTER_FAILED, payload: null});\n        }\n    }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport {BrowserRouter as Router, Switch} from \"react-router-dom\";\nimport {Provider} from \"react-redux\";\nimport {Login} from \"./pages/Login\";\nimport {Main} from \"./pages/Main\";\nimport {store} from \"./store\";\nimport {PrivateRoute} from \"./routes/PrivateRoute\";\nimport {PublicRoute} from \"./routes/PublicRoute\";\nimport {Registration} from \"./pages/Registration\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <Provider store={store}>\n            <Router>\n                <Switch>\n                    <PublicRoute path={\"/login\"}>\n                        <Login/>\n                    </PublicRoute>\n                    <PublicRoute path={\"/registration\"}>\n                        <Registration/>\n                    </PublicRoute>\n                    <PrivateRoute path={\"/\"}>\n                        <Main/>\n                    </PrivateRoute>\n                    <PrivateRoute path={\"/logout\"}>\n                        <Main/>\n                    </PrivateRoute>\n                </Switch>\n            </Router>\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}